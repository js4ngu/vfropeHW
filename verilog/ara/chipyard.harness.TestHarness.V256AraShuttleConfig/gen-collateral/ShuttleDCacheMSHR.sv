// Generated by CIRCT unknown git version
// Standard header to adapt well known macros to our needs.
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_REG_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_REG_INIT
`endif // not def RANDOMIZE
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_MEM_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_MEM_INIT
`endif // not def RANDOMIZE

// RANDOM may be set to an expression that produces a 32-bit random unsigned value.
`ifndef RANDOM
  `define RANDOM $random
`endif // not def RANDOM

// Users can define 'PRINTF_COND' to add an extra gate to prints.
`ifndef PRINTF_COND_
  `ifdef PRINTF_COND
    `define PRINTF_COND_ (`PRINTF_COND)
  `else  // PRINTF_COND
    `define PRINTF_COND_ 1
  `endif // PRINTF_COND
`endif // not def PRINTF_COND_

// Users can define 'ASSERT_VERBOSE_COND' to add an extra gate to assert error printing.
`ifndef ASSERT_VERBOSE_COND_
  `ifdef ASSERT_VERBOSE_COND
    `define ASSERT_VERBOSE_COND_ (`ASSERT_VERBOSE_COND)
  `else  // ASSERT_VERBOSE_COND
    `define ASSERT_VERBOSE_COND_ 1
  `endif // ASSERT_VERBOSE_COND
`endif // not def ASSERT_VERBOSE_COND_

// Users can define 'STOP_COND' to add an extra gate to stop conditions.
`ifndef STOP_COND_
  `ifdef STOP_COND
    `define STOP_COND_ (`STOP_COND)
  `else  // STOP_COND
    `define STOP_COND_ 1
  `endif // STOP_COND
`endif // not def STOP_COND_

// Users can define INIT_RANDOM as general code that gets injected into the
// initializer block for modules with registers.
`ifndef INIT_RANDOM
  `define INIT_RANDOM
`endif // not def INIT_RANDOM

// If using random initialization, you can also define RANDOMIZE_DELAY to
// customize the delay used, otherwise 0.002 is used.
`ifndef RANDOMIZE_DELAY
  `define RANDOMIZE_DELAY 0.002
`endif // not def RANDOMIZE_DELAY

// Define INIT_RANDOM_PROLOG_ for use in our modules below.
`ifndef INIT_RANDOM_PROLOG_
  `ifdef RANDOMIZE
    `ifdef VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
    `else  // VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
    `endif // VERILATOR
  `else  // RANDOMIZE
    `define INIT_RANDOM_PROLOG_
  `endif // RANDOMIZE
`endif // not def INIT_RANDOM_PROLOG_

// Include register initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_REG_
    `define ENABLE_INITIAL_REG_
  `endif // not def ENABLE_INITIAL_REG_
`endif // not def SYNTHESIS

// Include rmemory initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_MEM_
    `define ENABLE_INITIAL_MEM_
  `endif // not def ENABLE_INITIAL_MEM_
`endif // not def SYNTHESIS

module ShuttleDCacheMSHR(	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
  input         clock,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
  input         reset,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
  input         io_req_pri_val,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_req_pri_rdy,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_req_sec_val,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_req_sec_rdy,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [39:0] io_req_bits_addr,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [6:0]  io_req_bits_tag,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [4:0]  io_req_bits_cmd,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [1:0]  io_req_bits_size,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_req_bits_signed,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [63:0] io_req_bits_data,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_req_bits_tag_match,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [1:0]  io_req_bits_old_meta_coh_state,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [19:0] io_req_bits_old_meta_tag,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [3:0]  io_req_bits_way_en,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [4:0]  io_req_bits_sdq_id,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [31:0] io_probe_addr,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_idx_match,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [19:0] io_tag,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_mem_acquire_ready,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_mem_acquire_valid,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [2:0]  io_mem_acquire_bits_param,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [31:0] io_mem_acquire_bits_address,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_mem_grant_valid,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [2:0]  io_mem_grant_bits_opcode,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [1:0]  io_mem_grant_bits_param,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [3:0]  io_mem_grant_bits_size,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input  [3:0]  io_mem_grant_bits_sink,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_mem_finish_ready,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_mem_finish_valid,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [3:0]  io_mem_finish_bits_sink,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [3:0]  io_refill_way_en,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [11:0] io_refill_addr,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_meta_write_ready,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_meta_write_valid,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [5:0]  io_meta_write_bits_idx,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [3:0]  io_meta_write_bits_way_en,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [1:0]  io_meta_write_bits_data_coh_state,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [19:0] io_meta_write_bits_data_tag,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_replay_ready,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_replay_valid,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [39:0] io_replay_bits_addr,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [6:0]  io_replay_bits_tag,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [4:0]  io_replay_bits_cmd,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [1:0]  io_replay_bits_size,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_replay_bits_signed,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [63:0] io_replay_bits_data,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [4:0]  io_replay_bits_sdq_id,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  input         io_wb_req_ready,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_wb_req_valid,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [19:0] io_wb_req_bits_tag,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [5:0]  io_wb_req_bits_idx,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [2:0]  io_wb_req_bits_param,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output [3:0]  io_wb_req_bits_way_en,	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
  output        io_probe_rdy	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
);

  wire             _io_req_pri_rdy_output;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:66:75]
  wire             _grantackq_io_enq_ready;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:126:25]
  wire             _grantackq_io_deq_valid;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:126:25]
  wire             _rpq_io_enq_ready;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:63:19]
  wire             _rpq_io_deq_valid;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:63:19]
  wire [39:0]      _rpq_io_deq_bits_addr;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:63:19]
  reg  [3:0]       state;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
  reg  [39:0]      req_addr;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  reg  [4:0]       req_cmd;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  reg  [1:0]       req_old_meta_coh_state;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  reg  [19:0]      req_old_meta_tag;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  reg  [3:0]       req_way_en;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             idx_match = req_addr[11:6] == io_req_bits_addr[11:6];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16, :39:25, :42:{27,47}]
  reg  [1:0]       new_coh_state;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24]
  wire             _needs_second_acq_T_27 = req_cmd == 5'h1;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:32, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_28 = req_cmd == 5'h11;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:49, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_30 = req_cmd == 5'h7;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:66, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_32 = req_cmd == 5'h4;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_33 = req_cmd == 5'h9;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_34 = req_cmd == 5'hA;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_35 = req_cmd == 5'hB;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_39 = req_cmd == 5'h8;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_40 = req_cmd == 5'hC;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_41 = req_cmd == 5'hD;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_42 = req_cmd == 5'hE;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_43 = req_cmd == 5'hF;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_50 = req_cmd == 5'h3;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:91:54, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire             _needs_second_acq_T_52 = req_cmd == 5'h6;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:91:71, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
  wire [3:0]       _grow_param_r_T = {_needs_second_acq_T_27 | _needs_second_acq_T_28 | _needs_second_acq_T_30 | _needs_second_acq_T_32 | _needs_second_acq_T_33 | _needs_second_acq_T_34 | _needs_second_acq_T_35 | _needs_second_acq_T_39 | _needs_second_acq_T_40 | _needs_second_acq_T_41 | _needs_second_acq_T_42 | _needs_second_acq_T_43, _needs_second_acq_T_27 | _needs_second_acq_T_28 | _needs_second_acq_T_30 | _needs_second_acq_T_32 | _needs_second_acq_T_33 | _needs_second_acq_T_34 | _needs_second_acq_T_35 | _needs_second_acq_T_39 | _needs_second_acq_T_40 | _needs_second_acq_T_41 | _needs_second_acq_T_42 | _needs_second_acq_T_43 | _needs_second_acq_T_50 | _needs_second_acq_T_52, new_coh_state};	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:{32,49,66,76}, :91:{54,64,71}, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24]
  wire [1:0]       _grow_param_r_T_27 = {1'h0, _grow_param_r_T == 4'hC};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :38:9, :49:20, generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire [15:0][1:0] _GEN = {{2'h3}, {2'h3}, {2'h2}, {_grow_param_r_T_27}, {_grow_param_r_T_27}, {_grow_param_r_T_27}, {_grow_param_r_T_27}, {_grow_param_r_T_27}, {2'h3}, {2'h2}, {2'h2}, {2'h1}, {2'h3}, {2'h2}, {2'h1}, {2'h0}};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:122:10, :140:24, :161:16, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :49:20]
  wire             _r_c_cat_T_23 = io_req_bits_cmd == 5'h1;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:32]
  wire             _r_c_cat_T_24 = io_req_bits_cmd == 5'h11;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:49]
  wire             _r_c_cat_T_26 = io_req_bits_cmd == 5'h7;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:66]
  wire             _r_c_cat_T_28 = io_req_bits_cmd == 5'h4;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_29 = io_req_bits_cmd == 5'h9;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_30 = io_req_bits_cmd == 5'hA;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_31 = io_req_bits_cmd == 5'hB;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_35 = io_req_bits_cmd == 5'h8;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_36 = io_req_bits_cmd == 5'hC;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_37 = io_req_bits_cmd == 5'hD;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_38 = io_req_bits_cmd == 5'hE;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_39 = io_req_bits_cmd == 5'hF;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _r_c_cat_T_46 = io_req_bits_cmd == 5'h3;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:91:54]
  wire             _r_c_cat_T_48 = io_req_bits_cmd == 5'h6;	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:91:71]
  wire [26:0]      _r_beats1_decode_T = 27'hFFF << io_mem_grant_bits_size;	// @[generators/rocket-chip/src/main/scala/util/package.scala:243:71]
  wire [8:0]       r_beats1 = io_mem_grant_bits_opcode[0] ? ~(_r_beats1_decode_T[11:3]) : 9'h0;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:106:36, :221:14, :229:27, generators/rocket-chip/src/main/scala/util/package.scala:243:{46,71,76}]
  reg  [8:0]       r_counter;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:229:27]
  wire [8:0]       _r_counter1_T = r_counter - 9'h1;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:229:27, :230:28]
  wire             refill_done = (r_counter == 9'h1 | r_beats1 == 9'h0) & io_mem_grant_valid;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:221:14, :229:27, :232:{25,33,43}, :233:22]
  wire [8:0]       r_4 = r_beats1 & ~_r_counter1_T;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:221:14, :230:28, :234:{25,27}]
  wire             _io_wb_req_valid_output = state == 4'h1;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
  wire             _io_probe_rdy_T_4 = state == 4'h2;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
  wire             _io_meta_write_bits_data_coh_T = state == 4'h3;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
  wire             _io_mem_acquire_valid_T = state == 4'h4;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
  wire             _sec_rdy_T_6 = state == 4'h5;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
  wire             sec_rdy = idx_match & (_io_wb_req_valid_output | _io_probe_rdy_T_4 | _io_meta_write_bits_data_coh_T | (_io_mem_acquire_valid_T | _sec_rdy_T_6) & ~((_r_c_cat_T_23 | _r_c_cat_T_24 | _r_c_cat_T_26 | _r_c_cat_T_28 | _r_c_cat_T_29 | _r_c_cat_T_30 | _r_c_cat_T_31 | _r_c_cat_T_35 | _r_c_cat_T_36 | _r_c_cat_T_37 | _r_c_cat_T_38 | _r_c_cat_T_39 | _r_c_cat_T_46 | _r_c_cat_T_48) & ~(_needs_second_acq_T_27 | _needs_second_acq_T_28 | _needs_second_acq_T_30 | _needs_second_acq_T_32 | _needs_second_acq_T_33 | _needs_second_acq_T_34 | _needs_second_acq_T_35 | _needs_second_acq_T_39 | _needs_second_acq_T_40 | _needs_second_acq_T_41 | _needs_second_acq_T_42 | _needs_second_acq_T_43 | _needs_second_acq_T_50 | _needs_second_acq_T_52)) & ~refill_done);	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:{32,49,66}, :91:{54,64,71}, generators/rocket-chip/src/main/scala/tilelink/Edges.scala:233:22, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:104:{54,57}, generators/rocket-chip/src/main/scala/util/package.scala:16:47, :81:59, generators/shuttle/src/main/scala/dmem/MSHR.scala:42:27, :58:27, :59:56, :61:{23,52,55}]
  wire             _rpq_io_enq_valid_T = io_req_pri_val & _io_req_pri_rdy_output;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:64:39, :66:75]
  wire             _rpq_io_deq_ready_T_4 = state == 4'h8;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :66:49]
  assign _io_req_pri_rdy_output = state == 4'h0;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :66:75]
  reg              acked;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:68:18]
  wire             _io_meta_write_valid_T = state == 4'h6;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :78:15]
  wire             can_finish = _io_req_pri_rdy_output | _io_mem_acquire_valid_T;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, :81:59, generators/shuttle/src/main/scala/dmem/MSHR.scala:66:75]
  wire             _io_req_sec_rdy_output = sec_rdy & _rpq_io_enq_ready;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:58:27, :63:19, :139:29]
  reg  [1:0]       meta_hazard;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:141:28]
  wire             _io_meta_write_valid_output = _io_meta_write_valid_T | _io_meta_write_bits_data_coh_T;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, :81:59, generators/shuttle/src/main/scala/dmem/MSHR.scala:78:15]
  wire             _io_mem_acquire_valid_output = _io_mem_acquire_valid_T & _grantackq_io_enq_ready;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:126:25, :161:50]
  reg              state_REG;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:174:25]
  wire [3:0]       _coh_on_grant_T = {_needs_second_acq_T_27 | _needs_second_acq_T_28 | _needs_second_acq_T_30 | _needs_second_acq_T_32 | _needs_second_acq_T_33 | _needs_second_acq_T_34 | _needs_second_acq_T_35 | _needs_second_acq_T_39 | _needs_second_acq_T_40 | _needs_second_acq_T_41 | _needs_second_acq_T_42 | _needs_second_acq_T_43, _needs_second_acq_T_27 | _needs_second_acq_T_28 | _needs_second_acq_T_30 | _needs_second_acq_T_32 | _needs_second_acq_T_33 | _needs_second_acq_T_34 | _needs_second_acq_T_35 | _needs_second_acq_T_39 | _needs_second_acq_T_40 | _needs_second_acq_T_41 | _needs_second_acq_T_42 | _needs_second_acq_T_43 | _needs_second_acq_T_50 | _needs_second_acq_T_52, io_mem_grant_bits_param};	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:{32,49,66,76}, :91:{54,64,71}, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:84:18, generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire [3:0]       _r1_T = {_needs_second_acq_T_27 | _needs_second_acq_T_28 | _needs_second_acq_T_30 | _needs_second_acq_T_32 | _needs_second_acq_T_33 | _needs_second_acq_T_34 | _needs_second_acq_T_35 | _needs_second_acq_T_39 | _needs_second_acq_T_40 | _needs_second_acq_T_41 | _needs_second_acq_T_42 | _needs_second_acq_T_43, _needs_second_acq_T_27 | _needs_second_acq_T_28 | _needs_second_acq_T_30 | _needs_second_acq_T_32 | _needs_second_acq_T_33 | _needs_second_acq_T_34 | _needs_second_acq_T_35 | _needs_second_acq_T_39 | _needs_second_acq_T_40 | _needs_second_acq_T_41 | _needs_second_acq_T_42 | _needs_second_acq_T_43 | _needs_second_acq_T_50 | _needs_second_acq_T_52, new_coh_state};	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:{32,49,66,76}, :91:{54,64,71}, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24]
  wire [3:0]       _r2_T = {_r_c_cat_T_23 | _r_c_cat_T_24 | _r_c_cat_T_26 | _r_c_cat_T_28 | _r_c_cat_T_29 | _r_c_cat_T_30 | _r_c_cat_T_31 | _r_c_cat_T_35 | _r_c_cat_T_36 | _r_c_cat_T_37 | _r_c_cat_T_38 | _r_c_cat_T_39, _r_c_cat_T_23 | _r_c_cat_T_24 | _r_c_cat_T_26 | _r_c_cat_T_28 | _r_c_cat_T_29 | _r_c_cat_T_30 | _r_c_cat_T_31 | _r_c_cat_T_35 | _r_c_cat_T_36 | _r_c_cat_T_37 | _r_c_cat_T_38 | _r_c_cat_T_39 | _r_c_cat_T_46 | _r_c_cat_T_48, new_coh_state};	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:{32,49,66,76}, :91:{54,64,71}, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24]
  wire [1:0]       _r2_T_27 = {1'h0, _r2_T == 4'hC};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :38:9, :49:20, generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire [15:0][1:0] _GEN_0 = {{2'h3}, {2'h3}, {2'h2}, {_r2_T_27}, {_r2_T_27}, {_r2_T_27}, {_r2_T_27}, {_r2_T_27}, {2'h3}, {2'h2}, {2'h2}, {2'h1}, {2'h3}, {2'h2}, {2'h1}, {2'h0}};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:122:10, :140:24, :161:16, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :49:20]
  wire [1:0]       _r1_T_27 = {1'h0, _r1_T == 4'hC};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :38:9, :49:20, generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire [15:0][1:0] _GEN_1 = {{2'h3}, {2'h3}, {2'h2}, {_r1_T_27}, {_r1_T_27}, {_r1_T_27}, {_r1_T_27}, {_r1_T_27}, {2'h3}, {2'h2}, {2'h2}, {2'h1}, {2'h3}, {2'h2}, {2'h1}, {2'h0}};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:122:10, :140:24, :161:16, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :49:20]
  wire             _GEN_2 = _rpq_io_deq_ready_T_4 & ~_rpq_io_deq_valid;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:63:19, :66:49, :71:{31,34}]
  wire             _GEN_3 = _sec_rdy_T_6 & refill_done;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:233:22, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:81:33]
  wire [3:0]       _r_T_64 = {_r_c_cat_T_23 | _r_c_cat_T_24 | _r_c_cat_T_26 | _r_c_cat_T_28 | _r_c_cat_T_29 | _r_c_cat_T_30 | _r_c_cat_T_31 | _r_c_cat_T_35 | _r_c_cat_T_36 | _r_c_cat_T_37 | _r_c_cat_T_38 | _r_c_cat_T_39, _r_c_cat_T_23 | _r_c_cat_T_24 | _r_c_cat_T_26 | _r_c_cat_T_28 | _r_c_cat_T_29 | _r_c_cat_T_30 | _r_c_cat_T_31 | _r_c_cat_T_35 | _r_c_cat_T_36 | _r_c_cat_T_37 | _r_c_cat_T_38 | _r_c_cat_T_39 | _r_c_cat_T_46 | _r_c_cat_T_48, io_req_bits_old_meta_coh_state};	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:{32,49,66,76}, :91:{54,64,71}, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             is_hit = _r_T_64 == 4'h3 | _r_T_64 == 4'h2 | _r_T_64 == 4'h1 | _r_T_64 == 4'h7 | _r_T_64 == 4'h6 | (&_r_T_64) | _r_T_64 == 4'hE;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:9, :49:20, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:74:15, :78:15]
  wire [1:0]       _r_T_91 = {1'h0, _r_T_64 == 4'hC};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :38:9, :49:20, generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire [15:0][1:0] _GEN_4 = {{2'h3}, {2'h3}, {2'h2}, {_r_T_91}, {_r_T_91}, {_r_T_91}, {_r_T_91}, {_r_T_91}, {2'h3}, {2'h2}, {2'h2}, {2'h1}, {2'h3}, {2'h2}, {2'h1}, {2'h0}};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:122:10, :140:24, :161:16, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :49:20]
  wire [1:0]       dirties_cat = {_r_c_cat_T_23 | _r_c_cat_T_24 | _r_c_cat_T_26 | _r_c_cat_T_28 | _r_c_cat_T_29 | _r_c_cat_T_30 | _r_c_cat_T_31 | _r_c_cat_T_35 | _r_c_cat_T_36 | _r_c_cat_T_37 | _r_c_cat_T_38 | _r_c_cat_T_39, _r_c_cat_T_23 | _r_c_cat_T_24 | _r_c_cat_T_26 | _r_c_cat_T_28 | _r_c_cat_T_29 | _r_c_cat_T_30 | _r_c_cat_T_31 | _r_c_cat_T_35 | _r_c_cat_T_36 | _r_c_cat_T_37 | _r_c_cat_T_38 | _r_c_cat_T_39 | _r_c_cat_T_46 | _r_c_cat_T_48};	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:90:{32,49,66,76}, :91:{54,64,71}, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:29:18, generators/rocket-chip/src/main/scala/util/package.scala:16:47]
  wire             _GEN_5 = io_req_sec_val & _io_req_sec_rdy_output;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:97:24, :139:29]
  always @(posedge clock) begin	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
    if (reset) begin	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
      state <= 4'h0;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      new_coh_state <= 2'h0;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:161:16, generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24]
      r_counter <= 9'h0;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:229:27]
      meta_hazard <= 2'h0;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:161:16, generators/shuttle/src/main/scala/dmem/MSHR.scala:141:28]
    end
    else begin	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
      if (_GEN_2) begin	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:71:31]
        if (state_REG)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:174:25]
          state <= 4'h0;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      end
      else if (_rpq_io_enq_valid_T)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:64:39]
        state <= io_req_bits_tag_match ? {2'h1, is_hit, 1'h0} : {2'h0, io_req_bits_old_meta_coh_state != 2'h3, 1'h1};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:122:10, :140:24, :161:16, generators/rocket-chip/src/main/scala/util/Misc.scala:35:9, :38:9, :56:20, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :112:34, :113:21, :115:15, :118:15, :122:{13,19}]
      else if (io_wb_req_ready & _io_wb_req_valid_output)	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, src/main/scala/chisel3/util/Decoupled.scala:51:35]
        state <= 4'h2;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      else if (_io_probe_rdy_T_4 & io_wb_req_ready & acked)	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:68:18, :91:48]
        state <= 4'h3;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      else if (_io_meta_write_bits_data_coh_T & io_meta_write_ready)	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:88:32]
        state <= 4'h4;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      else if (io_mem_acquire_ready & _io_mem_acquire_valid_output)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:161:50, src/main/scala/chisel3/util/Decoupled.scala:51:35]
        state <= 4'h5;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      else if (_GEN_3)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:81:33]
        state <= 4'h6;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :78:15]
      else if (_io_meta_write_valid_T & io_meta_write_ready)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:78:{15,36}]
        state <= 4'h7;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :74:15]
      else if (state == 4'h7)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :74:15]
        state <= 4'h8;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      else if (_GEN_2)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:71:31]
        state <= 4'h0;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22]
      if (_rpq_io_enq_valid_T)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:64:39]
        new_coh_state <= io_req_bits_tag_match ? (is_hit ? _GEN_4[_r_T_64] : io_req_bits_old_meta_coh_state) : 2'h0;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, :161:16, generators/rocket-chip/src/main/scala/util/Misc.scala:35:{9,36}, :49:20, generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24, :112:34, :113:21, :114:17, :117:17, :121:15]
      else if (_GEN_5 & (_r1_T == 4'h3 | _r1_T == 4'h2 | _r1_T == 4'h1 | _r1_T == 4'h7 | _r1_T == 4'h6 | (&_r1_T) | _r1_T == 4'hE) & (_r2_T == 4'h3 | _r2_T == 4'h2 | _r2_T == 4'h1 | _r2_T == 4'h7 | _r2_T == 4'h6 | (&_r2_T) | _r2_T == 4'hE)) begin	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:9, :49:20, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:74:15, :78:15, :81:49, :97:{24,43}, :102:25, :103:15]
        if (&dirties_cat)	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:29:18, :106:42]
          new_coh_state <= _GEN_0[_r2_T];	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :49:20, generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24]
        else	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:106:42]
          new_coh_state <= _GEN_1[_r1_T];	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :49:20, generators/shuttle/src/main/scala/dmem/MSHR.scala:45:24]
      end
      else if (_GEN_3)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:81:33]
        new_coh_state <= _coh_on_grant_T == 4'hC ? 2'h3 : _coh_on_grant_T == 4'h4 | _coh_on_grant_T == 4'h0 ? 2'h2 : {1'h0, _coh_on_grant_T == 4'h1};	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:84:{18,38}, :122:10, :140:24, generators/rocket-chip/src/main/scala/util/Misc.scala:38:9, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:36:22, :45:24]
      if (io_mem_grant_valid) begin	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:13:14]
        if (r_counter == 9'h0)	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:229:27, :231:25]
          r_counter <= r_beats1;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:221:14, :229:27]
        else	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:231:25]
          r_counter <= _r_counter1_T;	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:229:27, :230:28]
      end
      if (io_meta_write_ready & _io_meta_write_valid_output)	// @[generators/rocket-chip/src/main/scala/util/package.scala:81:59, src/main/scala/chisel3/util/Decoupled.scala:51:35]
        meta_hazard <= 2'h1;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:140:24, generators/shuttle/src/main/scala/dmem/MSHR.scala:141:28]
      else if (|meta_hazard)	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:141:28, :142:21]
        meta_hazard <= meta_hazard + 2'h1;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:140:24, generators/shuttle/src/main/scala/dmem/MSHR.scala:141:28, :142:59]
    end
    if (_rpq_io_enq_valid_T) begin	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:64:39]
      req_addr <= io_req_bits_addr;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
      req_old_meta_coh_state <= io_req_bits_old_meta_coh_state;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
      req_old_meta_tag <= io_req_bits_old_meta_tag;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
      req_way_en <= io_req_bits_way_en;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
    end
    if (_rpq_io_enq_valid_T | _GEN_5 & (&dirties_cat))	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:29:18, :106:42, :109:27, generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16, :64:39, :97:{24,43}, :101:13, :106:43, :107:9]
      req_cmd <= io_req_bits_cmd;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:38:16]
    acked <= ~_rpq_io_enq_valid_T & (io_mem_grant_valid | acked);	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:64:39, :68:18, :69:{29,37}, :106:43, :108:11]
    state_REG <= ~_rpq_io_deq_valid;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:63:19, :71:34, :174:25]
  end // always @(posedge)
  `ifdef ENABLE_INITIAL_REG_	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
    `ifdef FIRRTL_BEFORE_INITIAL	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
      `FIRRTL_BEFORE_INITIAL	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
    `endif // FIRRTL_BEFORE_INITIAL
    logic [31:0] _RANDOM[0:5];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
    initial begin	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
      `ifdef INIT_RANDOM_PROLOG_	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
        `INIT_RANDOM_PROLOG_	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
      `endif // INIT_RANDOM_PROLOG_
      `ifdef RANDOMIZE_REG_INIT	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
        for (logic [2:0] i = 3'h0; i < 3'h6; i += 3'h1) begin
          _RANDOM[i] = `RANDOM;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
        end	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
        state = _RANDOM[3'h0][3:0];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :36:22]
        req_addr = {_RANDOM[3'h0][31:4], _RANDOM[3'h1][11:0]};	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :36:22, :38:16]
        req_cmd = _RANDOM[3'h1][23:19];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
        req_old_meta_coh_state = _RANDOM[3'h4][5:4];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
        req_old_meta_tag = _RANDOM[3'h4][25:6];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
        req_way_en = _RANDOM[3'h4][29:26];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
        new_coh_state = _RANDOM[3'h5][4:3];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :45:24]
        r_counter = _RANDOM[3'h5][13:5];	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:229:27, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :45:24]
        acked = _RANDOM[3'h5][14];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :45:24, :68:18]
        meta_hazard = _RANDOM[3'h5][16:15];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :45:24, :141:28]
        state_REG = _RANDOM[3'h5][17];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :45:24, :174:25]
      `endif // RANDOMIZE_REG_INIT
    end // initial
    `ifdef FIRRTL_AFTER_INITIAL	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
      `FIRRTL_AFTER_INITIAL	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
    `endif // FIRRTL_AFTER_INITIAL
  `endif // ENABLE_INITIAL_REG_
  Queue16_ShuttleMSHRReq rpq (	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:63:19]
    .clock                          (clock),
    .reset                          (reset),
    .io_enq_ready                   (_rpq_io_enq_ready),
    .io_enq_valid                   ((_rpq_io_enq_valid_T | io_req_sec_val & sec_rdy) & ~(io_req_bits_cmd == 5'h2 | _r_c_cat_T_46)),	// @[generators/rocket-chip/src/main/scala/rocket/Consts.scala:88:{35,45}, :91:54, generators/shuttle/src/main/scala/dmem/MSHR.scala:58:27, :64:{39,57,75,87,90}]
    .io_enq_bits_addr               (io_req_bits_addr),
    .io_enq_bits_tag                (io_req_bits_tag),
    .io_enq_bits_cmd                (io_req_bits_cmd),
    .io_enq_bits_size               (io_req_bits_size),
    .io_enq_bits_signed             (io_req_bits_signed),
    .io_enq_bits_data               (io_req_bits_data),
    .io_enq_bits_tag_match          (io_req_bits_tag_match),
    .io_enq_bits_old_meta_coh_state (io_req_bits_old_meta_coh_state),
    .io_enq_bits_old_meta_tag       (io_req_bits_old_meta_tag),
    .io_enq_bits_way_en             (io_req_bits_way_en),
    .io_enq_bits_sdq_id             (io_req_bits_sdq_id),
    .io_deq_ready                   (io_replay_ready & _rpq_io_deq_ready_T_4),	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:66:49, :176:39]
    .io_deq_valid                   (_rpq_io_deq_valid),
    .io_deq_bits_addr               (_rpq_io_deq_bits_addr),
    .io_deq_bits_tag                (io_replay_bits_tag),
    .io_deq_bits_cmd                (io_replay_bits_cmd),
    .io_deq_bits_size               (io_replay_bits_size),
    .io_deq_bits_signed             (io_replay_bits_signed),
    .io_deq_bits_data               (io_replay_bits_data),
    .io_deq_bits_sdq_id             (io_replay_bits_sdq_id)
  );
  Queue1_TLBundleE_a32d64s3k4z4c grantackq (	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:126:25]
    .clock            (clock),
    .reset            (reset),
    .io_enq_ready     (_grantackq_io_enq_ready),
    .io_enq_valid     (refill_done & io_mem_grant_bits_opcode[2] & ~(io_mem_grant_bits_opcode[1])),	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:71:{36,43,52}, :233:22, generators/shuttle/src/main/scala/dmem/MSHR.scala:128:41]
    .io_enq_bits_sink (io_mem_grant_bits_sink),
    .io_deq_ready     (io_mem_finish_ready & can_finish),	// @[generators/rocket-chip/src/main/scala/util/package.scala:81:59, generators/shuttle/src/main/scala/dmem/MSHR.scala:132:49]
    .io_deq_valid     (_grantackq_io_deq_valid),
    .io_deq_bits_sink (io_mem_finish_bits_sink)
  );
  assign io_req_pri_rdy = _io_req_pri_rdy_output;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :66:75]
  assign io_req_sec_rdy = _io_req_sec_rdy_output;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :139:29]
  assign io_idx_match = (|state) & idx_match;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :36:22, :42:27, :134:{26,41}]
  assign io_tag = req_addr[31:12];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16, :40:26, :137:10]
  assign io_mem_acquire_valid = _io_mem_acquire_valid_output;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :161:50]
  assign io_mem_acquire_bits_param = {1'h0, _GEN[_grow_param_r_T]};	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:348:15, generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:58:19, generators/rocket-chip/src/main/scala/util/Misc.scala:35:36, :38:9, :49:20, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
  assign io_mem_acquire_bits_address = {req_addr[31:6], 6'h0};	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16, :41:51, :164:{48,66}]
  assign io_mem_finish_valid = _grantackq_io_deq_valid & can_finish;	// @[generators/rocket-chip/src/main/scala/util/package.scala:81:59, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :126:25, :130:49]
  assign io_refill_way_en = req_way_en;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
  assign io_refill_addr = {req_addr[11:6] | r_4[8:3], r_4[2:0], 3'h0};	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:234:25, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16, :136:{18,36}]
  assign io_meta_write_valid = _io_meta_write_valid_output;	// @[generators/rocket-chip/src/main/scala/util/package.scala:81:59, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
  assign io_meta_write_bits_idx = req_addr[11:6];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16, :39:25]
  assign io_meta_write_bits_way_en = req_way_en;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
  assign io_meta_write_bits_data_coh_state = _io_meta_write_bits_data_coh_T ? 2'h0 : new_coh_state;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:161:16, generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :45:24, :149:37]
  assign io_meta_write_bits_data_tag = req_addr[31:12];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16, :40:26, :137:10]
  assign io_replay_valid = _rpq_io_deq_ready_T_4 & _rpq_io_deq_valid;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :63:19, :66:49, :168:44]
  assign io_replay_bits_addr = {8'h0, req_addr[31:6], _rpq_io_deq_bits_addr[5:0]};	// @[generators/rocket-chip/src/main/scala/tilelink/Edges.scala:232:25, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16, :63:19, :164:48, :170:{23,67}]
  assign io_wb_req_valid = _io_wb_req_valid_output;	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7]
  assign io_wb_req_bits_tag = req_old_meta_tag;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
  assign io_wb_req_bits_idx = req_addr[11:6];	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16, :39:25]
  assign io_wb_req_bits_param = (&req_old_meta_coh_state) | req_old_meta_coh_state == 2'h2 ? 3'h1 : req_old_meta_coh_state == 2'h1 ? 3'h2 : req_old_meta_coh_state == 2'h0 ? 3'h5 : 3'h0;	// @[generators/rocket-chip/src/main/scala/tilelink/Metadata.scala:140:24, :161:16, generators/rocket-chip/src/main/scala/util/Misc.scala:38:36, :56:20, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
  assign io_wb_req_bits_way_en = req_way_en;	// @[generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :38:16]
  assign io_probe_rdy = ~((|state) & req_addr[11:6] == io_probe_addr[11:6]) | ~(_io_wb_req_valid_output | _io_probe_rdy_T_4 | _io_meta_write_bits_data_coh_T) & ~(|meta_hazard);	// @[generators/rocket-chip/src/main/scala/util/package.scala:16:47, :81:59, generators/shuttle/src/main/scala/dmem/MSHR.scala:12:7, :36:22, :38:16, :39:25, :43:{33,50}, :134:26, :141:28, :142:21, :144:{19,41,61,65,102,117}]
endmodule

